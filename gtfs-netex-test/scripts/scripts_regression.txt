[


{
    "block": "swissmikro",
    "download_url":"https://github.com/user-attachments/files/18201746/swiss_mikro.zip",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%"},
        {"step":3,"script": "gtfs_import_to_db.py", "args": "%%inputfilepath%% %%dir%%/gtfs-import_step3.duckdb"},
        {"step":4,"script": "gtfs_convert_to_db.py", "args": "%%dir%%/gtfs-import_step3.duckdb %%dir%%/netex-import_step4.duckdb"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/netex-import_step4.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-netex_step6.xml] %%dir%%/netex2-database_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/netex2-database_step7.duckdb %%dir%%/%%block%%-gtfs-out_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/%%block%%-gtfs-out_step8.duckdb %%dir%%/%%block%%-gtfs_step9.zip"},
        {"step":10,"script": "tool_netex_stats.py", "args": "%%dir%%/%%block%%-netex_step6.xml"},
        {"step":11,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-netex_step6.xml] %%dir%%/netexa-database_step11.duckdb True"},
        {"step":12,"script": "related_explorer.py", "args": "%%dir%%/netexa-database_step11.duckdb ServiceJourney random %%dir%%/sj_step12.xml False"},
        {"step":13,"script": "related_explorer.py", "args": "%%dir%%/netexa-database_step11.duckdb Line random %%dir%%/line_step13.xml False"},
        {"step":14,"script": "tool_xml_validator.py", "args": "%%dir%%  ./netex-xsd/xsd/netex_publication.xsd"},
        {"step":15,"script": "#tool_xml_compress.py", "args": "%%dir%%/%%block%%-netex_step11.xml"},
        {"step":16,"script": "tool_netex_stats.py", "args": "%%dir%%/%%block%%-netex_step11.xml"},
        {"step":17,"script": "#tool_netex_check_assertions.py", "args": "./aux_test_input/general-netex-assertions.txt %%dir%%/%%block%%-netex_step11.xml"},
        {"step":18,"script": "remove_file", "args": "%%inputfilepath%%"}

        ]
  },
       {
    "block": "nl1",
    "download_url":"https://github.com/user-attachments/files/18202156/NeTEx_TESO_TESO_20241112_20241112.xml.gz",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "netex_to_db.py", "args": "[%%inputfilepath%%] %%dir%%/nl-import_step3.duckdb True"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/nl-import_step3.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-wpd-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-wpd-netex_step6.xml] %%dir%%/nl-gtfs_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/nl-gtfs_step7.duckdb %%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb %%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":10,"script": "tool_check_db.py", "args": "%%dir%%/nl-import_step3.duckdb"},
        {"step":11,"script": "tool_check_db.py", "args": "%%dir%%/netex-database_step5.duckdb"},
        {"step":12,"script": "tool_check_db.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":13,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":14,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip %%dir%%/%%block%%-wpd-map_step14.html 1 %%log%%"}
         ]
  },

       {
    "block": "nl2",
    "download_url":"https://github.com/user-attachments/files/18202160/NeTEx_WPD_WPD_20241112_20241112.xml.gz",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "netex_to_db.py", "args": "[%%inputfilepath%%] %%dir%%/nl-import_step3.duckdb True"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/nl-import_step3.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-wpd-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-wpd-netex_step6.xml] %%dir%%/nl-gtfs_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/nl-gtfs_step7.duckdb %%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb %%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":10,"script": "tool_check_db.py", "args": "%%dir%%/nl-import_step3.duckdb"},
        {"step":11,"script": "tool_check_db.py", "args": "%%dir%%/netex-database_step5.duckdb"},
        {"step":12,"script": "tool_check_db.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":13,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":14,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip %%dir%%/%%block%%-wpd-map_step14.html 1 %%log%%"}
         ]
  },

       {
    "block": "nl3",
    "download_url":"https://github.com/user-attachments/files/18202170/NeTEx_WSF_WSF_20241112_20241112.xml.gz",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "netex_to_db.py", "args": "[%%inputfilepath%%] %%dir%%/nl-import_step3.duckdb True"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/nl-import_step3.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-wpd-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-wpd-netex_step6.xml] %%dir%%/nl-gtfs_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/nl-gtfs_step7.duckdb %%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb %%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":10,"script": "tool_check_db.py", "args": "%%dir%%/nl-import_step3.duckdb"},
        {"step":11,"script": "tool_check_db.py", "args": "%%dir%%/netex-database_step5.duckdb"},
        {"step":12,"script": "tool_check_db.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":13,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":14,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip %%dir%%/%%block%%-wpd-map_step314.html 1 %%log%%"}
         ]
  },

       {
    "block": "nl4",
    "download_url":"https://github.com/user-attachments/files/18202171/NeTEx_WSF_WSF_20241203_20241203.xml.gz",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "netex_to_db.py", "args": "[%%inputfilepath%%] %%dir%%/nl-import_step3.duckdb True"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/nl-import_step3.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-wpd-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-wpd-netex_step6.xml] %%dir%%/nl-gtfs_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/nl-gtfs_step7.duckdb %%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb %%dir%%/%%block%%-wpd-gtfs_step9.zip"},
        {"step":10,"script": "tool_check_db.py", "args": "%%dir%%/nl-import_step3.duckdb"},
        {"step":11,"script": "tool_check_db.py", "args": "%%dir%%/netex-database_step5.duckdb"},
        {"step":12,"script": "tool_check_db.py", "args": "%%dir%%/nl2-gtfs_step8.duckdb"},
        {"step":13,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-wpd-gtfs.zip_step9"},
        {"step":14,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-wpd-gtfs_step9.zip %%dir%%/%%block%%-wpd-map_step14.html 1 %%log%%"}
         ]
  },
  {
    "block": "swissinterchange",
    "download_url":"https://github.com/user-attachments/files/18201749/swiss_interchange.zip",
    "scripts": [
       {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "netex_to_db.py", "args": "[%%inputfilepath%%] %%dir%%/import_step3.duckdb True"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "epip_db_to_db.py", "args": "%%dir%%/import_step3.duckdb %%dir%%/netex-database_step5.duckdb"},
        {"step":6,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step5.duckdb %%dir%%/%%block%%-epip-netex_step6.xml"},
        {"step":7,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-epip-netex_step6.xml] %%dir%%/ch-inter-gtfs_step7.duckdb True"},
        {"step":8,"script": "gtfs_db_to_db.py", "args": "%%dir%%/ch-inter-gtfs_step7.duckdb %%dir%%/ch-inter-2-gtfs_step8.duckdb"},
        {"step":9,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/ch-inter-2-gtfs_step8.duckdb %%dir%%/%%block%%-ch-inter-gtfs_step9.zip"},
        {"step":10,"script": "tool_check_db.py", "args": "%%dir%%/import_step3.duckdb"},
        {"step":11,"script": "tool_check_db.py", "args": "%%dir%%/netex-database_step5.duckdb"},
        {"step":12,"script": "tool_check_db.py", "args": "%%dir%%/nl-gtfs_step8.duckdb"}
        ]
  },
    {
    "block": "blablacar",
    "url":"https://transport.data.gouv.fr/datasets/blablacar-bus-horaires-theoriques-et-temps-reel-du-reseau-europeen",
    "download_url":"https://github.com/user-attachments/files/18202184/blablacar.zip",
    "description":"Blablacar data",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "download_input_file", "args": "%%dir%%/%%block%%/"},
        {"step":3,"script": "gtfs_import_to_db.py", "args": "%%inputfilepath%% %%dir%%/gtfs-import_step3.duckdb"},
        {"step":4,"script": "remove_file", "args": "%%inputfilepath%%"},
        {"step":5,"script": "gtfs_convert_to_db.py", "args": "%%dir%%/gtfs-import_step3.duckdb %%dir%%/netex-import_step5.duckdb"},
        {"step":6,"script": "epip_db_to_db.py", "args": "%%dir%%/netex-import_step5.duckdb %%dir%%/netex-database_step6.duckdb"},
        {"step":7,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step6.duckdb %%dir%%/%%block%%-netex_step7.xml"},
        {"step":8,"script": "tool_netex_check_assertions.py", "args": "./aux_test_input/blablacar-assertions.txt %%dir%%/%%block%%-netex_step7.xml"},
        {"step":9,"script": "tool_netex_stats.py", "args": "%%dir%%/%%block%%-netex_step7.xml"},
        {"step":10,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-netex_step7.xml] %%dir%%/netex3-database_step10.duckdb True"},
        {"step":11,"script": "gtfs_db_to_db.py", "args": "%%dir%%/netex3-database_step10.duckdb %%dir%%/netex4-database_step11.duckdb"},
        {"step":12,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/netex4-database_step11.duckdb %%dir%%/%%block%%-gtfs_step12.zip"},
        {"step":13,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-gtfs_step12.zip"},
        {"step":14,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-gtfs_step12.zip %%dir%%/%%block%%-map_step14.html --limitation=10"}
        ]
  },
  {
    "block": "flixbus",
    "download_url":"https://gtfs.gis.flix.tech/gtfs_generic_eu.zip",
    "description":"Flixbus data",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "gtfs_import_to_db.py", "args": "%%inputdir%%/flixbus.zip %%dir%%/%%block%%gtfs-import_step2.duckdb"},
        {"step":3,"script": "gtfs_convert_to_db.py", "args": "%%dir%%/%%block%%gtfs-import_step2.duckdb %%dir%%/netex-import_step3.duckdb"},
        {"step":4,"script": "epip_db_to_db.py", "args": "%%dir%%/netex-import_step3.duckdb %%dir%%/netex-database_step4.duckdb"},
        {"step":5,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step4.duckdb %%dir%%/%%block%%-netex_step5.xml"},
        {"step":6,"script": "tool_netex_check_assertions.py", "args": "./aux_test_input/flixbus-assertions.txt %%dir%%/%%block%%-netex_step5.xml"},
        {"step":7,"script": "tool_netex_stats.py", "args": "%%dir%%/%%block%%-netex_step5.xml %%log%%"},
        {"step":8,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-netex_step5.xml] %%dir%%/netex3-database_step8.duckdb True"},
        {"step":9,"script": "gtfs_db_to_db.py", "args": "%%dir%%/netex3-database_step8.duckdb %%dir%%/netex4-database_step9.duckdb"},
        {"step":10,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/netex4-database_step9.duckdb %%dir%%/%%block%%-gtfs_step10.zip"},
        {"step":11,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-gtfs_step10.zip"},
        {"step":12,"script": "#gtfs_show_map.py", "args": "--log=%%log%% --limitation 10 %%dir%%/%%block%%-gtfs_step10.zip %%dir%%/%%block%%-map_step12.html"}
        ]
  },

       {
    "block": "swiss4",
    "scripts": [
        {"step":1,"script": "clean_tmp", "args": "%%dir%%"},
        {"step":2,"script": "set_defaults", "args": "authority='SKI+'; time_zone='Europe/Berlin'; feed_publisher_name='SBB SKI+'; feed_publisher_url='https://opentransportdata.swiss'"},
        {"step":3,"script": "swiss_to_db.py", "args": "%%inputdir%%/swiss4.zip %%dir%%/swiss-import_step3.duckdb True True"},
        {"step":4,"script": "epip_db_to_db.py", "args": "%%dir%%/swiss-import_step3.duckdb %%dir%%/netex-database_step4.duckdb"},
        {"step":5,"script": "epip_db_to_xml.py", "args": "%%dir%%/netex-database_step4.duckdb %%dir%%/%%block%%-nete_step5.xml"},
        {"step":6,"script": "tool_netex_check_assertions.py", "args": "./aux_test_input/swiss-assertions.txt %%dir%%/%%block%%-netex_step6.xml"},
        {"step":7,"script": "tool_netex_stats.py", "args": "%%dir%%/%%block%%-netex_step5.xml"},
        {"step":8,"script": "tool_xml_validator.py", "args": "%%dir%%/%%block%%-netex_step5.xml ./netex-xsd/xsd/NeTEx_publication.xsd"},
        {"step":9,"script": "related_explorer.py", "args": "%%dir%%/netex2-database_step5.duckdb Line random %%dir%%/line_step9.xml True"},
        {"step":10,"script": "related_explorer.py", "args": "%%dir%%/netex2-database_step5.duckdb ServiceJourney random %%dir%%/sj_step10.xml True"},
        {"step":11,"script": "related_explorer.py", "args": "%%dir%%/swiss-import_step3.duckdb ServiceJourney random %%dir%%/sj1_step11.xml True"},
        {"step":12,"script": "related_explorer.py", "args": "%%dir%%/netex-database_step5.duckdb ServiceJourney random %%dir%%/sj2_step12.xml True"},
        {"step":13,"script": "netex_to_db.py", "args": "[%%dir%%/%%block%%-netex_step5.xml] %%dir%%/netex2-database_step13.duckdb"},
        {"step":14,"script": "gtfs_db_to_db.py", "args": "%%dir%%/netex2-database_step13.duckdb %%dir%%/netex3-database_step14.duckdb"},
        {"step":15,"script": "gtfs_db_to_gtfs.py", "args": "%%dir%%/netex3-database_step14.duckdb %%dir%%/%%block%%-gtfs_step15.zip"},
        {"step":16,"script": "tool_simple_gtfs_validator.py", "args": "%%dir%%/%%block%%-gtfs_step15.zip"},
        {"step":17,"script": "gtfs_show_map.py", "args": "%%dir%%/%%block%%-gtfs_step15.zip %%dir%%/%%block%%-map_step17.html 10"}

        ]
  },
  {
    "block": "logtest",
    "scripts": [
        {"script": "clean_tmp", "args": "%%dir%%"},
        {"script": "tool_test_logger.py", "args": "%%log%%"}
        ]
  }
]
